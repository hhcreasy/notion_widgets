<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wheel of Life Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
          font-family: 'Lyon-text', serif;
          #background-color: #f3f4f6; /* Tailwind bg-gray-100 */
          display: flex;
          justify-content: center;
          align-items: center;
          min-height: 100vh;
          margin: 0;
      }

      .container {
          background-color: white; /* Tailwind bg-white */
          padding: 2rem; /* Tailwind p-8 */
          border-radius: 0.75rem; /* Tailwind rounded-lg */
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* Tailwind shadow-md */
          width: 90%;
          max-width: 600px; /* Increased max-width */
          margin-top: 1rem; /* Tailwind mt-8 */
      }

      h1 {
          color: #334155; /* Tailwind text-gray-800 */
          text-align: center;
          margin-bottom: 1.5rem; /* Tailwind mb-6 */
          font-size: 1.875rem; /* Tailwind text-2xl */
          font-weight: 600; /* Tailwind font-semibold */
      }

      canvas {
          width: 100%; /* Make canvas responsive */
          height: auto; /* Maintain aspect ratio */
          max-height: 400px; /* Limit maximum height of the chart */
      }

      #chart-container {
          margin-bottom: 1.5rem; /* Tailwind mb-6 */
      }

      .input-group {
          margin-bottom: 1rem; /* Tailwind mb-4 */
      }

      .input-group label {
          display: block;
          color: #4b5563; /* Tailwind text-gray-700 */
          margin-bottom: 0.5rem; /* Tailwind mb-2 */
          font-size: 0.875rem; /* Tailwind text-sm */
          font-weight: 500; /* Tailwind font-medium */
      }

      .input-group input {
          width: 100%;
          padding: 0.75rem; /* Tailwind p-3 */
          border-radius: 0.375rem; /* Tailwind rounded-md */
          border: 1px solid #d1d5db; /* Tailwind border-gray-300 */
          font-size: 1rem; /* Tailwind text-base */
          transition: border-color 0.15s ease-in-out, shadow-sm 0.15s ease-in-out; /* Added shadow-sm transition */
      }

      .input-group input:focus {
          outline: none;
          border-color: #3b82f6; /* Tailwind border-blue-500 */
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15); /* Tailwind ring-blue-500 ring-opacity-20 */
      }


      #update-chart {
          display: block;
          width: 100%;
          padding: 0.75rem; /* Tailwind p-3 */
          background-color: #3b82f6; /* Tailwind bg-blue-500 */
          color: white; /* Tailwind text-white */
          text-align: center;
          border-radius: 0.375rem; /* Tailwind rounded-md */
          font-size: 1rem; /* Tailwind text-base */
          font-weight: 600; /* Tailwind font-semibold */
          cursor: pointer;
          transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out, box-shadow 0.15s ease-in-out; /* Added box-shadow transition */
          margin-top: 0.5rem; /* Tailwind mt-2 */
          border: none;
      }

      #update-chart:hover {
          background-color: #2563eb; /* Tailwind bg-blue-700 */
      }

      #update-chart:active {
          background-color: #1e40af; /* Tailwind bg-blue-800 */
          transform: translateY(1px);
           box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1); /* Tailwind shadow-sm approximation */
      }

      @media (max-width: 640px) {
          .container {
              padding: 1.5rem; /* Tailwind p-6 on small screens */
          }
          h1 {
              font-size: 1.75rem; /* Tailwind text-xl on small screens */
          }
          .input-group label {
              font-size: 0.75rem; /* Tailwind text-sm on small screens */
          }
          .input-group input {
              font-size: 0.9rem; /* Tailwind text-base on small screens */
              padding: 0.6rem;
          }
          #update-chart {
              font-size: 0.9rem; /* Tailwind text-base on small screens */
               padding: 0.6rem;
          }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Wheel of Life</h1>
      <div id="chart-container">
        <canvas id="wheelOfLifeChart"></canvas>
      </div>
      <div class="input-group">
        <label for="career">Career</label>
        <input type="number" id="career" value="0" min="0" max="10" />
      </div>
      <div class="input-group">
        <label for="finance">Finance</label>
        <input type="number" id="finance" value="0" min="0" max="10" />
      </div>
      <div class="input-group">
        <label for="nutrition">Nutrition</label>
        <input type="number" id="nutrition" value="0" min="0" max="10" />
      </div>
      <div class="input-group">
        <label for="relationships">Relationships</label>
        <input type="number" id="relationships" value="0" min="0" max="10" />
      </div>
      <div class="input-group">
        <label for="personalGrowth">Personal Growth</label>
        <input type="number" id="personalGrowth" value="0" min="0" max="10" />
      </div>
      <div class="input-group">
        <label for="fun">Travel, Fun & Recreation</label>
        <input type="number" id="fun" value="0" min="0" max="10" />
      </div>
      <div class="input-group">
        <label for="home">Home</label>
        <input type="number" id="home" value="0" min="0" max="10" />
      </div>
      <div class="input-group">
        <label for="fitness">Fitness</label>
        <input type="number" id="fitness" value="0" min="0" max="10" />
      </div>
      <button id="update-chart">Update Chart</button>
    </div>

    <script>
      const ctx = document.getElementById('wheelOfLifeChart').getContext('2d');
      const careerInput = document.getElementById('career');
      const financeInput = document.getElementById('finance');
      const nutritionInput = document.getElementById('nutrition');
      const relationshipsInput = document.getElementById('relationships');
      const personalGrowthInput = document.getElementById('personalGrowth');
      const funInput = document.getElementById('fun');
      const homeInput = document.getElementById('home');
      const fitnessInput = document.getElementById('fitness');
      const updateChartButton = document.getElementById('update-chart');

      let polarAreaChart;

      // Function to fetch data from Notion (Placeholder - Replace with your actual fetch)
      async function fetchDataFromNotion() {
          // Replace this placeholder with your actual Notion API call
          // Example (Conceptual):
          // const response = await fetch('https://api.notion.com/v1/databases/YOUR_DATABASE_ID/query', {
          //     method: 'POST',
          //     headers: {
          //         'Authorization': 'Bearer YOUR_NOTION_TOKEN',
          //         'Notion-Version': '2022-06-28', // Or your desired version
          //         'Content-Type': 'application/json'
          //     },
          //     body: JSON.stringify({
          //         // Add any filter/sort criteria here if needed
          //     })
          // });
          // const data = await response.json();
          // return data.results; // Adjust based on actual Notion response structure

          // Placeholder data for demonstration purposes
          return {
              career: Math.floor(Math.random() * 11),     // 0-10
              finance: Math.floor(Math.random() * 11),    // 0-10
              nutrition: Math.floor(Math.random() * 11),  // 0-10
              relationships: Math.floor(Math.random() * 11), // 0-10
              personalGrowth: Math.floor(Math.random() * 11),// 0-10
              fun: Math.floor(Math.random() * 11),        // 0-10
              home: Math.floor(Math.random() * 11),       // 0-10
              fitness: Math.floor(Math.random() * 11)      // 0-10
          };
      }

      function initializeChart(data) {
           polarAreaChart = new Chart(ctx, {
              type: 'polarArea',
              data: {
                  labels: [
                      'Career',
                      'Finance',
                      'Nutrition',
                      'Relationships',
                      'Personal Growth',
                      'Travel, Fun & Recreation',
                      'Home',
                      'Fitness'
                  ],
                  datasets: [{
                      label: 'Life Area',
                      data: [
                          data.career,
                          data.finance,
                          data.nutrition,
                          data.relationships,
                          data.personalGrowth,
                          data.fun,
                          data.home,
                          data.fitness
                      ],
                      backgroundColor: [
                          'rgba(255, 99, 132, 0.6)',
                          'rgba(54, 162, 235, 0.6)',
                          'rgba(255, 206, 86, 0.6)',
                          'rgba(75, 192, 192, 0.6)',
                          'rgba(153, 102, 255, 0.6)',
                          'rgba(255, 159, 64, 0.6)',
                          'rgba(199, 21, 133, 0.6)',
                          'rgba(0, 255, 255, 0.6)'
                      ],
                      borderColor: [
                          'rgba(255, 99, 132, 1)',
                          'rgba(54, 162, 235, 1)',
                          'rgba(255, 206, 86, 1)',
                          'rgba(75, 192, 192, 1)',
                          'rgba(153, 102, 255, 1)',
                          'rgba(255, 159, 64, 1)',
                          'rgba(199, 21, 133, 1)',
                          'rgba(0, 255, 255, 1)'
                      ],
                      borderWidth: 1,
                  }]
              },
              options: {
                  responsive: true,
                  maintainAspectRatio: true,
                  plugins: {
                      legend: {
                          position: 'top',
                          labels: {
                              font: {
                                  family: 'Inter',
                                  size: 12
                              }
                          }
                      },
                  },
                  scales: {
                      r: {
                          ticks: {
                              beginAtZero: true,
                              max: 10,
                              stepSize: 1,
                              font: {
                                  family: 'Inter',
                                  size: 12
                              },
                              callback: function(value) {
                                  return value;  // convert it to string
                              }
                          },
                          pointLabels: {
                              font: {
                                  family: 'Inter',
                                  size: 12
                              }
                          },
                          angleLines: {
                              color: 'rgba(0, 0, 0, 0.1)' // Grid line color
                          },
                          grid: {
                              color: 'rgba(0, 0, 0, 0.1)' // Grid line color
                          }
                      },
                  }
              }
          });
      }

      function updateChart(newData) {
          polarAreaChart.data.datasets[0].data = [
              newData.career,
              newData.finance,
              newData.nutrition,
              newData.relationships,
              newData.personalGrowth,
              newData.fun,
              newData.home,
              newData.fitness
          ];
          polarAreaChart.update();

           // Update the input fields, too
          careerInput.value = newData.career;
          financeInput.value = newData.finance;
          nutritionInput.value = newData.nutrition;
          relationshipsInput.value = newData.relationships;
          personalGrowthInput.value = newData.personalGrowth;
          funInput.value = newData.fun;
          homeInput.value = newData.home;
          fitnessInput.value = newData.fitness;
      }



      // Initial load and chart creation
      fetchDataFromNotion()
          .then(data => {
              initializeChart(data);
               // Update input values on initial load, too.
              careerInput.value = data.career;
              financeInput.value = data.finance;
              nutritionInput.value = data.nutrition;
              relationshipsInput.value = data.relationships;
              personalGrowthInput.value = data.personalGrowth;
              funInput.value = data.fun;
              homeInput.value = data.home;
              fitnessInput.value = data.fitness;
          })
          .catch(error => {
              console.error("Error fetching data from Notion:", error);
              // Handle error appropriately (e.g., display a message to the user)
              //  As a fallback, you could initialize the chart with default values.
              const defaultData = {
                  career: 5, finance: 5, nutrition: 5, relationships: 5,
                  personalGrowth: 5, fun: 5, home: 5, fitness: 5
              };
              initializeChart(defaultData);
          });

      updateChartButton.addEventListener('click', () => {
           const newData = {
                  career: careerInput.value,
                  finance: financeInput.value,
                  nutrition: nutritionInput.value,
                  relationships: relationshipsInput.value,
                  personalGrowth: personalGrowthInput.value,
                  fun: funInput.value,
                  home: homeInput.value,
                  fitness: fitnessInput.value
              };
          updateChart(newData);
      });
    </script>
  </body>
</html>
